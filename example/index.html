<html>
<head>
	<title>AjaxUpload Example</title>	
	<!--<script src="../dist/jquery.ajaxupload.min.js"></script>-->
	<script src="../dist/jquery.ajaxupload.js"></script>
</head>
<body>	
	<h1>AjaxUpload Example</h1>
	<div class="uploader">						
		<input type='file' class="input-file"/>
   	<button class="btn btn-upload" onclick="upload(this)">Upload</button>
    <div class="progress" style="width:400px;">
				<div class="progress-bar" role="progressbar" aria-valuemin="0" aria-valuemax="100" style="background-color:#000;color:#fff;"></div>     				   			
			</div>
			<img class="uploaded-image" src=""/>  			
	</div>
	<script>		

		// upload function			
		function upload(uploadBtn) {		

			var uploader = uploadBtn.parentNode;	
			
			// create AjaxUpload object
			var ajaxUpload = new AjaxUpload({
				uploadUrl:'fileUpload.php', 
				inputFile: uploader.querySelector('.input-file'), 
				progressBar: uploader.querySelector('.progress-bar'), 
				fileKey: 'myFile'
			})

			// on complete handler
			.onComplete(function(res) {
				if (res.success == true) {
					// show uploaded image
					uploader.querySelector('.uploaded-image').setAttribute('src', res.path);				
				} else {
					// alert the error
					uploader.querySelector('.progress-bar').style.width = '0%';
					uploader.querySelector('.progress-bar').innerHTML = '';
					alert(res.error);
				}
			}).upload();

		}
	</script>
</body>
</html>